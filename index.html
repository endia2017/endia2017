<!doctype html>
<html>
<head>
<meta charset="UTF-8" />
<title>Baloon Bouquets.</title>
<script type="text/javascript" src="src/phaser.js"></script>
<script type="text/javascript" src="src/Group.js"></script>
<script type="text/javascript">
var bcGround;

var cenXL=191,cenYL=446,cenXC=549,cenYC=446,cenXR=913,cenYR=446;

var myGame;
var gameState=0;
var startMsg;
var baloonGroup; 
var grpTween;
var bouq0Grp,bouq1Grp,bouq2Grp; 
var redAnim,greenAnim,blueAnim, currentAnim; 
var jokerGrp; 
var jokerEnable;
var bouqL,bouqC,bouqR;
var numEjectedBaloons;
var profitVal=0,profitTxt;
var bestVal, bestValTxt;
var packSize; 
var remBaloons,remBaloonsTxt; 
var clrArr=[0,1,1,2,2,2, 0,0,1,1,1,2, 0,0,0,1,2,2];

function onDownHandler(pnt)
{
	if(gameState==0)
	{
		if((pnt.x>430)&&(pnt.y>340)&&(pnt.x<670)&&(pnt.y<400)) 
		{
			startMsg.sendToBack();
			gameState=1;
			return;
		}
	}
	if(gameState>0)
	{
		if(jokerGrp.isDown(pnt.x,pnt.y))
		{
			if(jokerEnable)
			{
				jokerGrp.setSelJoker(pnt);
				if(jokerGrp.numSelClr>=0)
				{
					numSelClr=jokerGrp.numSelClr;
					var isAddable=false;
					if(bouqL.isAddable(numSelClr))
					{
						bouqL.setAlpha(1);
						isAddable=true;
					}
					if(bouqC.isAddable(numSelClr))
					{
						bouqC.setAlpha(1);
						isAddable=true;
					}
					if(bouqR.isAddable(numSelClr))
					{
						bouqR.setAlpha(1);
						isAddable=true;
					}
				}
			}
		}
		
		if(((pnt.y>274)&&(pnt.y<620))&&(((pnt.x>18)&&(pnt.x<364))||
			((pnt.x>376)&&(pnt.x<722))||((pnt.x>740)&&(pnt.x<1086)))) 
		{
			//grpTween.start();
			//var strX="{ x: "+baloonGroup.x-35+" }";
			//grpTween.to(strX);
			//grpTween.start();
			
			if(jokerEnable)
			{
				if(jokerGrp.numSelClr>=0)
				{
					chooseBouq(pnt,numSelClr);
				}
			}
			else
			{
				chooseBouq(pnt,baloonGroup.children[0].numClr);
			}
		}
	}
}

function ejectNextBaloon()
{
	var baloonName,numClr,animClr;
	if(!jokerEnable)
	{
		//baloonGroup.addAll('x',-35);
		animClr=baloonGroup.children[0].numClr;
		
		baloonGroup.x=baloonGroup.x-35; 
		
		baloonGroup.bringToTop(baloonGroup.children[0]); 
		baloonGroup.set(baloonGroup.children[29],'x',baloonGroup.children[28].x+35);
		if(numEjectedBaloons<packSize)
		{
		/*
			if(numEjectedBaloons<30)
			{
				numClr=numEjectedBaloons%3;
			}
			else
			{
				if(numEjectedBaloons<60)
				{
					numClr= Math.floor((numEjectedBaloons%6)/2);
				}
				else
				{
					numClr=Math.floor(((numEjectedBaloons-60)%9)/3);
				}
			}
		*/
			numClr=clrArr[numEjectedBaloons%18];
		
			switch(numClr)
			{
				case 0:
					baloonName='redBaloon';
				break;
				case 1:
					baloonName='greenBaloon';
				break;
				case 2:
					baloonName='blueBaloon';
				break;
			}
			
			baloonGroup.children[29].loadTexture(baloonName);
			baloonGroup.children[29].numClr=numClr;
			
			baloonGroup.children[0].loadTexture('emptyBaloon');
			
			redAnim.alpha=0;
			greenAnim.alpha=0;
			blueAnim.alpha=0;
			
			switch(baloonGroup.children[0].numClr)
			{
				case 0:
					currentAnim=redAnim;
					currentAnim.frame=5;
					currentAnim.alpha=1;
					currentAnim.play('rAnim');
				break;
				case 1:
					currentAnim=greenAnim;
					currentAnim.frame=5;
					currentAnim.alpha=1;
					currentAnim.play('gAnim');
				break;
				case 2:
					currentAnim=blueAnim;
					currentAnim.frame=5;
					currentAnim.alpha=1;
					currentAnim.play('bAnim');
				break;
			}
		
			//currentAnim.frame=5;
			//currentAnim.alpha=1;
			//currentAnim.y=590;
			//currentAnim.x=125;
			
			numEjectedBaloons++;
		}
		else
		{
			baloonGroup.children[29].loadTexture('emptyBaloon');
			baloonGroup.children[29].numClr=-1;
			
			redAnim.alpha=0;
			greenAnim.alpha=0;
			blueAnim.alpha=0;
			
			baloonGroup.children[0].loadTexture('emptyBaloon');
			
			switch(baloonGroup.children[0].numClr)
			{
				case 0:
					currentAnim=redAnim;
					currentAnim.frame=5;
					currentAnim.alpha=1;
					currentAnim.play('rAnim');
				break;
				case 1:
					currentAnim=greenAnim;
					currentAnim.frame=5;
					currentAnim.alpha=1;
					currentAnim.play('gAnim');
				break;
				case 2:
					currentAnim=blueAnim;
					currentAnim.frame=5;
					currentAnim.alpha=1;
					currentAnim.play('bAnim');
				break;
			}
		
			//currentAnim.frame=5;
			//currentAnim.alpha=1;
		}
		
		if(remBaloons > 0)
		{
			remBaloons--;
		}
		if(remBaloons==0)
		{
			gameState=2;
			currentAnim.alpha=0;
			remBaloonsTxt.text="";
		}
	}
	else
	{
		jokerGrp.clearSelection();
		profitVal=profitVal-15;
	}
	
	numClr=baloonGroup.children[0].numClr;
	if((!bouqL.isAddable(numClr))&&(!bouqC.isAddable(numClr))&&(!bouqR.isAddable(numClr)))
	{
		bouqL.setAlpha(0.5);
		bouqC.setAlpha(0.5);
		bouqR.setAlpha(0.5);
		jokerEnable=true;
	}
	else
	{
		if(bouqL.isAddable(numClr)) bouqL.setAlpha(1);
		else bouqL.setAlpha(0.5);
		
		if(bouqC.isAddable(numClr)) bouqC.setAlpha(1);
		else bouqC.setAlpha(0.5);
		
		if(bouqR.isAddable(numClr)) bouqR.setAlpha(1);
		else bouqR.setAlpha(0.5);
		
		jokerEnable=false;
	}
	
	profitTxt.text=profitVal;
}



function moveBaloon(numBoug,numBaloon,clrForAdding)
{
	//var clrForAdding=baloonGroup.children[0].numClr;
	var spr;
	ejectNextBaloon(); 
	
	if(numBaloon<0) return;
	
	switch(clrForAdding)
	{
		case 0:
			spr='redBaloon';
		break;
		case 1:
			spr='greenBaloon';
		break;
		case 2:
			spr='blueBaloon';
		break;
	}
		
	switch(numBoug)
	{
		case 0:
			bouq0Grp.children[numBaloon].numClr=clrForAdding;
			bouq0Grp.children[numBaloon].loadTexture(spr);
			if(numBaloon==2)
			{
				profitVal=profitVal+3;
				profitTxt.text=profitVal;
				for(var i=0;i<3;i++)
				{
					bouq0Grp.children[i].numClr=-1;
					bouq0Grp.children[i].loadTexture('emptyBaloon');
				}
			}
		break;
		case 1:
			bouq1Grp.children[numBaloon].numClr=clrForAdding;
			bouq1Grp.children[numBaloon].loadTexture(spr);
			if(numBaloon==4)
			{
				profitVal=profitVal+7
				profitTxt.text=profitVal;
				for(var i=0;i<5;i++)
				{
					bouq1Grp.children[i].numClr=-1;
					bouq1Grp.children[i].loadTexture('emptyBaloon');
				}
			}
		break;
		case 2:
			bouq2Grp.children[numBaloon].numClr=clrForAdding;
			bouq2Grp.children[numBaloon].loadTexture(spr);
			if(numBaloon==5)
			{
				profitVal=profitVal+15;
				profitTxt.text=profitVal;
				for(var i=0;i<6;i++)
				{
					bouq2Grp.children[i].numClr=-1;
					bouq2Grp.children[i].loadTexture('emptyBaloon');
				}
			}
		break;
	}
}

function chooseBouq(pnt,numSelClr)
{
	//blueAnim.animations.play('bAnim');
	if((pnt.y>274)&&(pnt.y<620))
	{
		if((pnt.x>18)&&(pnt.x<364))
		{
			if(bouqL.isAddable(numSelClr))
			{
				bouqL.addBaloon(numSelClr);
				if(bouqL.isCompleted())
				{
					bouqL.clear();
					profitVal=profitVal+10;
				}
				ejectNextBaloon();
			}
		}
		
		if((pnt.x>376)&&(pnt.x<722)) 
		{
			if(bouqC.isAddable(numSelClr))
			{
				bouqC.addBaloon(numSelClr);
				if(bouqC.isCompleted())
				{
					bouqC.clear();
					profitVal=profitVal+20;
				}
				ejectNextBaloon();
			}
		}
		
		if((pnt.x>740)&&(pnt.x<1086))
		{
			if(bouqR.isAddable(numSelClr))
			{
				bouqR.addBaloon(numSelClr);
				if(bouqR.isCompleted())
				{
					bouqR.clear();
					profitVal=profitVal+25;
				}
				ejectNextBaloon();
			}
		}
		
		//moveBaloon(numBoug,numBaloon,numSelClr);
		
		if(remBaloons > 0)
		{
			//remBaloons--;
			//if(bouqL.isAddable(baloonGroup.children[0].numClr))
			//	bouqL.setAlpha(1);
			//else
			//	bouqL.setAlpha(0.5);
			remBaloonsTxt.text=remBaloons;
		}
	}

	
}
</script>
</head>
<body bgcolor='#000000'>
<script type="text/javascript">

    window.onload = function() {
    var game = new Phaser.Game(1100, 720, Phaser.AUTO, '', { preload: preload, create: create, update: update });

    function preload ()
	{
		game.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;
		game.scale.pageAlignHorizontally = true;
		game.scale.pageAlignVertically = true;
        game.load.image('background', 'img/bcGround8.png');
		game.load.image('startMsg', 'img/startMsg.png');
		game.load.image('bouq3Gr', 'img/bouq3Gr.png');
		game.load.image('bouq1c4lGr', 'img/bouq1c4lGr.png');
		game.load.image('bouq1c5lGr', 'img/bouq1c5lGr.png');
		game.load.image('emptyBaloon', 'img/emptyBaloon.png');
		
		game.load.image('redBal', 'img/redBal.png');
		game.load.image('greenBal', 'img/greenBal.png');
		game.load.image('blueBal', 'img/blueBal.png');
		game.load.image('cRedBal', 'img/cRedBal.png');
		game.load.image('cGreenBal', 'img/cGreenBal.png');
		game.load.image('cBlueBal', 'img/cBlueBal.png');
		
		
		game.load.image('redBaloon', 'img/redBaloon_b.png');
		game.load.image('greenBaloon', 'img/greenBaloon_b.png');
		game.load.image('blueBaloon', 'img/blueBaloon_b.png');
		
		game.load.image('price10c', 'img/price10c.png');
		game.load.image('price20c', 'img/price20c.png');
		game.load.image('price25c', 'img/price25c.png');
		
		game.load.image('ico3', 'img/bouq3GreyIco.png');
		game.load.image('ico5', 'img/boouq5GreyIco.png');
		game.load.image('ico6', 'img/bouq6GreyIco.png');
		
		game.load.bitmapFont('arialTxt', 'img/arlWTxt.png', 'img/arlWTxt.xml');
		
		game.load.spritesheet('redAnim', 'img/redAnim.png', 70, 94);
		game.load.spritesheet('greenAnim', 'img/greenAnim.png', 70, 94);
		game.load.spritesheet('blueAnim', 'img/blueAnim.png', 70, 94);

		//game.load.bitmapFont('tnrTxt', 'img/tnrTxt.png', 'img/tnrTxt.xml');

		myGame=game;
		
		
    }

    function create ()
	{
		var baloonName;
		packSize=30;
		remBaloons=packSize;
        game.add.image(0, 0, 'background');
		//blueAnim = game.add.sprite(15, 30, 'blueAnim');
		//blueAnim.frame = 5;
		//blueAnim.animations.add('bAnim', [5, 4, 3, 2, 1, 0], 10);
		//blueAnim.animations.play('bAnim');
		
		baloonGroup=game.add.group();
		for(var i=0;i<30;i++)
		{
			switch(clrArr[i%18])
			{
				case 0:
					baloonName='redBaloon';
				break;
				case 1:
					baloonName='greenBaloon';
				break;
				case 2:
					baloonName='blueBaloon';
				break;
			}
			
			baloonImg=baloonGroup.create(40+i*35,640, baloonName);
			baloonImg.numClr=clrArr[i%18];
		}
		numEjectedBaloons=30;
		
		jokerGrp=new Jokers();
		
		bouqL=new Bouq3(188,435);
		//bouqL=new Bouq1c5l(188,435);
		bouqC=new Bouq1c4l(549,448);
		bouqR=new Bouq1c5l(914,437);
		
		//bouqL=new Bouq4(188,435);
		//bouqC=new Bouq1c2l2l(549,437);
		//bouqR=new Bouq1c3l3l(916,452);
		
		//bouqL=new Spiral(188,435);
		//bouqR=new Piramid(914,437);
		//bouqC=new Elka(549,437);
		
		//profitTxt=game.add.bitmapText(880,5,'arialTxt',"00",64);
		//remBaloonsTxt=game.add.bitmapText(50,610,'arialTxt',"00",36);
		
		jokerEnable=true;
		
		// букеты, в которые добавление невозможно, делаем полупрозрачными 
		if(bouqL.isAddable(baloonGroup.children[0].numClr))
		{
			bouqL.setAlpha(1);
			jokerEnable=false;
		}
		else
		{
			bouqL.setAlpha(0.5);
		}
		
		if(bouqC.isAddable(baloonGroup.children[0].numClr))
		{
			bouqC.setAlpha(1);
			jokerEnable=false;
		}
		else
		{
			bouqC.setAlpha(0.5);
		}
		
		if(bouqR.isAddable(baloonGroup.children[0].numClr))
		{
			bouqR.setAlpha(1);
			jokerEnable=false;
		}
		else
		{
			bouqR.setAlpha(0.5);
		}
		
		redAnim = game.add.sprite(10, 590, 'redAnim');
		redAnim.frame = 0;
		redAnim.animations.add('rAnim', [5, 4, 3, 2, 1, 0], 10);
		redAnim.alpha=0;
		
		greenAnim = game.add.sprite(10, 590, 'greenAnim');
		greenAnim.frame = 0;
		greenAnim.animations.add('gAnim', [5, 4, 3, 2, 1, 0], 10);
		greenAnim.alpha=0;
		
		blueAnim = game.add.sprite(10, 590, 'blueAnim');
		blueAnim.frame = 0;
		blueAnim.animations.add('bAnim', [5, 4, 3, 2, 1, 0], 10);
		blueAnim.alpha=0;
		
		baloonGroup.children[0].loadTexture('emptyBaloon');
		
		switch(baloonGroup.children[0].numClr)
		{
			case 0:
				currentAnim=redAnim;
			break;
			case 1:
				currentAnim=greenAnim;
			break;
			case 2:
				currentAnim=blueAnim;
			break;
		}
		
		currentAnim.frame=0;
		currentAnim.alpha=1;
		//currentAnim.y=590;
		//currentAnim.x=10; .play('left');
		
		game.add.image(210, 270, 'price10c');
		game.add.image(590, 270, 'price20c');
		game.add.image(970, 270, 'price25c');
		
		game.add.image(40, 270, 'ico3');
		game.add.image(380, 270, 'ico5');
		game.add.image(740, 270, 'ico6');
		
		startMsg=game.add.image(25, 135, 'startMsg');
		
		
		bestValTxt=game.add.bitmapText(125,5,'arialTxt',"",64);
		profitTxt=game.add.bitmapText(880,5,'arialTxt',"",64);
		remBaloonsTxt=game.add.bitmapText(28,615,'arialTxt',"",36);
		
		profitTxt.text=profitVal;
		remBaloonsTxt.text=packSize;
		
		//grpTween = game.add.tween(baloonGroup).to({x: -10});
		
		if(document.cookie=="")
		{
			//alert(document.cookie);
			bestVal=0;
			bestValTxt.text=bestVal;
		}
		else
		{
			
		}
		
		gameState=0;
		game.input.onDown.add(onDownHandler);
		
    }
		
	function update ()
	{ 
    }
	};
</script>
<script>

function Jokers()
{
	this.numSelClr=-1;
	
	this.balGroup=myGame.add.group();
	this.redJoker=myGame.add.image(20,80,'redBaloon');
	this.greenJoker=myGame.add.image(86,80,'greenBaloon');
	this.blueJoker=myGame.add.image(152,80,'blueBaloon');
	
	this.selJoker=myGame.add.image(86,146,'emptyBaloon');
	
	this.setSelJoker=function(pnt)
	{
		if((pnt.y>80)&&(pnt.y<144))
		{
			if((pnt.x>20)&&(pnt.x<86))
			{
				this.selJoker.loadTexture('redBaloon');
				this.numSelClr=0;
			}
			if((pnt.x>86)&&(pnt.x<152))
			{
				this.selJoker.loadTexture('greenBaloon');
				this.numSelClr=1;
			}
			if((pnt.x>152)&&(pnt.x<218))
			{
				this.selJoker.loadTexture('blueBaloon');
				this.numSelClr=2;
			}
		}
	}
	
	this.isDown=function(x,y){
		if((x>20)&&(x<218)&&(y>80)&&(y<144)) return true;
		return false;
	}
	
	this.clearSelection=function()
	{
		this.selJoker.loadTexture('emptyBaloon');
		this.numSelClr=-1;
	}
	
	this.getImgByNumClr=function(numClr){
		switch(numClr){
		case 0:
			return "redBaloon";
		break;
		case 1:
			return "greenBaloon";
		break;
		case 2:
			return "blueBaloon";
		break;
		}
	}
}


function Bouq3(cenX,cenY) 
{
	this.cenX=cenX;
	this.cenY=cenY;
	this.imgWd=220;
	this.imgHg=204;
	this.bgImg=myGame.add.image(this.cenX-this.imgWd/2,this.cenY-this.imgHg/2,"bouq3Gr");
	this.numBal=0;
	this.balArr=[-1,-1,-1];
	
	this.balGroup=myGame.add.group();
	for(var i=0;i<3;i++)
	{
		this.balGroup.create(this.cenX,this.cenY,'emptyBaloon');
	}
	
	this.balGroup.children[0].x=this.cenX-57;
	this.balGroup.children[0].y=this.cenY-112;
	
	this.balGroup.children[1].x=this.cenX-8;
	this.balGroup.children[1].y=this.cenY+18;
	this.balGroup.children[1].pivot.x=58;
	this.balGroup.children[1].pivot.y=112;
	this.balGroup.children[1].angle=-120;
	
	this.balGroup.children[2].x=this.cenX+12;
	this.balGroup.children[2].y=this.cenY+20;
	this.balGroup.children[2].pivot.x=58;
	this.balGroup.children[2].pivot.y=112;
	this.balGroup.children[2].angle=120;
	
	this.isAddable=function(numClr){
		if(this.numBal==0) return true;
		if((this.numBal==1)&&(numClr!=this.balArr[0])) return true;
		if((this.numBal==2)&&(numClr!=this.balArr[0])&&(numClr!=this.balArr[1])) return true;
		
		return false;
	}

	this.addBaloon=function(numClr){
		var balImgName=this.getImgByNumClr(numClr);
		this.balGroup.children[this.numBal].loadTexture(balImgName);
		this.balArr[this.numBal]=numClr;
		this.numBal++;
	}
	
	this.isCompleted=function(){
		if (this.numBal==3) return true;
		return false;
	}
	
	this.getImgByNumClr=function(numClr){
		switch(numClr){
		case 0:
			return "redBal";
		break;
		case 1:
			return "greenBal";
		break;
		case 2:
			return "blueBal";
		break;
		}
	}
	
	this.setAlpha=function(val){
		this.bgImg.alpha=val;
	}
	
	this.clear=function(){
		for(var i=0;i<3;i++)
		{
			this.balGroup.children[i].loadTexture('emptyBaloon');
			this.balArr[i]=-1;
		}
		this.numBal=0;
	}
}

function Bouq1c4l(cenX,cenY) 
{
	this.cenX=cenX;
	this.cenY=cenY;
	this.imgWd=290;
	this.imgHg=290;
	this.bgImg=myGame.add.image(this.cenX-this.imgWd/2,this.cenY-this.imgHg/2,"bouq1c4lGr");
	this.numBal=0;
	this.balArr=[-1,-1,-1,-1,-1];
	this.balGroup=myGame.add.group();
	
	for(var i=0;i<5;i++)
	{
		this.balGroup.create(this.cenX,this.cenY,'emptyBaloon');
	}
	
	this.balGroup.children[4].x=this.cenX-62;
	this.balGroup.children[4].y=this.cenY-56;
	
	this.balGroup.children[0].x=this.cenX-58;
	this.balGroup.children[0].y=this.cenY-146;
	
	this.balGroup.children[1].x=this.cenX-20;
	this.balGroup.children[1].y=this.cenY;
	this.balGroup.children[1].pivot.x=58;
	this.balGroup.children[1].pivot.y=125;
	this.balGroup.children[1].angle=-90;
	
	this.balGroup.children[2].x=this.cenX;
	this.balGroup.children[2].y=this.cenY+20;
	this.balGroup.children[2].pivot.x=58;
	this.balGroup.children[2].pivot.y=125;
	this.balGroup.children[2].angle=180;
	
	this.balGroup.children[3].x=this.cenX+20;
	this.balGroup.children[3].y=this.cenY;
	this.balGroup.children[3].pivot.x=58;
	this.balGroup.children[3].pivot.y=125;
	this.balGroup.children[3].angle=90;
	
	//this.balGroup.bringToTop(this.balGroup.children[0]);
	
	this.isAddable=function(numClr){
		if(this.numBal==0) return true;
		
		if((this.numBal==1)&&(numClr!=this.balArr[0])) return true;
		
		if((this.numBal>=2)&&(numClr!=this.balArr[0])&&(numClr==this.balArr[1])) return true;
		
		return false;
	}
	
	this.addBaloon=function(numClr){
		var balImgName=this.getImgByNumClr(numClr);
		if(this.numBal==0)
		{
			this.balGroup.children[4].loadTexture(balImgName);
		}
		else
		{
			this.balGroup.children[this.numBal-1].loadTexture(balImgName);
		}
		//this.balGroup.children[this.numBal].loadTexture(balImgName);
		this.balArr[this.numBal]=numClr;
		this.numBal++;
	}
	
	this.isCompleted=function(){
		if (this.numBal==5) return true;
		return false;
	}
	
	this.getImgByNumClr=function(numClr){
		switch(numClr){
		case 0:
			if(this.numBal==0) return "cRedBal";
			return "redBal";
		break;
		case 1:
			if(this.numBal==0) return "cGreenBal";
			return "greenBal";
		break;
		case 2:
			if(this.numBal==0) return "cBlueBal";
			return "blueBal";
		break;
		}
	}
	
	this.setAlpha=function(val){
		this.bgImg.alpha=val;
	}
	
	this.clear=function(){
		for(var i=0;i<5;i++)
		{
			this.balGroup.children[i].loadTexture('emptyBaloon');
			this.balArr[i]=-1;
		}
		this.numBal=0;
	}
}

function Bouq1c5l(cenX,cenY) 
{
	this.cenX=cenX;
	this.cenY=cenY;
	this.imgWd=314;
	this.imgHg=304;
	this.bgImg=myGame.add.image(this.cenX-this.imgWd/2,this.cenY-this.imgHg/2,"bouq1c5lGr");
	this.numBal=0;
	this.balArr=[-1,-1,-1,-1,-1,-1];
	this.balGroup=myGame.add.group();
	
	for(var i=0;i<6;i++)
	{
		this.balGroup.create(this.cenX,this.cenY,'emptyBaloon');
	}
	
	this.balGroup.children[5].x=this.cenX-58;
	this.balGroup.children[5].y=this.cenY-54;
	
	this.balGroup.children[0].x=this.cenX-58;
	this.balGroup.children[0].y=this.cenY-155;
	
	this.balGroup.children[1].x=this.cenX-34;
	this.balGroup.children[1].y=this.cenY;
	this.balGroup.children[1].pivot.x=58;
	this.balGroup.children[1].pivot.y=125;
	this.balGroup.children[1].angle=-72;
	
	this.balGroup.children[2].x=this.cenX-22;
	this.balGroup.children[2].y=this.cenY+40;
	this.balGroup.children[2].pivot.x=58;
	this.balGroup.children[2].pivot.y=125;
	this.balGroup.children[2].angle=-144;
	
	this.balGroup.children[3].x=this.cenX+20;
	this.balGroup.children[3].y=this.cenY+40;
	this.balGroup.children[3].pivot.x=58;
	this.balGroup.children[3].pivot.y=125;
	this.balGroup.children[3].angle=144;
	
	this.balGroup.children[4].x=this.cenX+36;
	this.balGroup.children[4].y=this.cenY-2;
	this.balGroup.children[4].pivot.x=58;
	this.balGroup.children[4].pivot.y=125;
	this.balGroup.children[4].angle=72;
	
	this.isAddable=function(numClr){
		if(this.numBal==0) return true;
		
		if((this.numBal==1)&&(numClr!=this.balArr[0])) return true;
		
		if((this.numBal>=2)&&(numClr!=this.balArr[0])&&(numClr==this.balArr[1])) return true;
		
		return false;
	}
	
	this.addBaloon=function(numClr){
		var balImgName=this.getImgByNumClr(numClr);
		if(this.numBal==0)
		{
			this.balGroup.children[5].loadTexture(balImgName);
		}
		else
		{
			this.balGroup.children[this.numBal-1].loadTexture(balImgName);
		}

		this.balArr[this.numBal]=numClr;
		this.numBal++;
	}
	
	this.isCompleted=function(){
		if (this.numBal==6) return true;
		return false;
	}
	
	this.getImgByNumClr=function(numClr){
		switch(numClr){
		case 0:
			if(this.numBal==0) return "cRedBal";
			return "redBal";
		break;
		case 1:
			if(this.numBal==0) return "cGreenBal";
			return "greenBal";
		break;
		case 2:
			if(this.numBal==0) return "cBlueBal";
			return "blueBal";
		break;
		}
	}
	
	this.setAlpha=function(val){
		this.bgImg.alpha=val;
	}
	
	this.clear=function(){
		for(var i=0;i<6;i++)
		{
			this.balGroup.children[i].loadTexture('emptyBaloon');
			this.balArr[i]=-1;
		}
		this.numBal=0;
	}
}


//
</script>
</body>
</html>